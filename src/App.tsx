import React from 'react'
import Routing from "./app/routing.tsx";
import {ChakraProvider} from '@chakra-ui/react'
import './App.scss'
import styles from "./widgets/main-layout/ui/styles.module.scss";
import {QrCode} from "./pages/qrCode";
import {I18nextProvider} from "react-i18next";
// eslint-disable-next-line @typescript-eslint/ban-ts-comment
// @ts-expect-error
import i18n from "./i18n";
import {APP_ENV} from "./shared/consts.ts";
import {history} from "./app/router/router-history.ts";

function App() {

    const userAgent = navigator.userAgent.toLowerCase();
    const isPhone = userAgent.includes("mobile") || userAgent.includes("android") || userAgent.includes("iphone");

    // eslint-disable-next-line @typescript-eslint/ban-ts-comment
    // @ts-expect-error
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.enableClosingConfirmation();
    tg.expand()

    if ((!isPhone || tg?.platform === 'tdesktop' || tg?.platform === 'web' || tg?.platform === 'unknown') && APP_ENV === 'production') {
        return (
            <div className={styles.wrapper}>
                <div className={styles.content}>
                    <QrCode/>
                </div>
            </div>
        );
    }

    tg.onEvent('backButtonClicked', function() {
        history.push('/');
    });

    // const users = [
    //     6301910166,
    //     6301425249,
    //     761357310,
    //     1267468871,
    //     6625519553,
    //     6703074970,
    //     498188251,
    //     1010177194,
    //     6621312879,
    //     977631707,
    //     281660418,
    //     797355973,
    //     259050489,
    //     6742691556,
    //     6075888799,
    //     933110211,
    //     6488663196,
    //     7020931800,
    //     5599795778,
    //     6913063993,
    //     7058538014,
    //     6322004584,
    //     675239262,
    //     5211345806,
    //     836362994,
    //     971391905,
    //     7477530087,
    //     6703232514,
    //     477993007,
    //     7225276362,
    //     773748648,
    //     7118183062,
    //     1095328963,
    //     1733265878,
    //     1167281985,
    //     548898521,
    //     1975041323,
    //     1524100382,
    //     975077959,
    //     1068950755,
    //     1848170991,
    //     7411717620,
    //     6913709718,
    //     5017699072,
    //     6940413180,
    //     1820599800,
    //     6761437967,
    //     6688270288,
    //     119437723,
    //     928853123,
    //     7081969171,
    //     300650181,
    //     1346993923,
    //     5203269287,
    //     755942060,
    //     110274780,
    //     1642009944,
    //     261739804,
    //     5036225139,
    //     642609091,
    //     5772104916,
    //     1219663552,
    //     655371955,
    //     5062640914,
    //     6869026680,
    //     7291117207,
    //     7413258369,
    //     7242170540,
    //     6571661443,
    //     7076261645,
    //     287149203,
    //     530465159,
    //     7310869505,
    //     6960721315,
    //     772027617,
    //     1721059828,
    //     451406971,
    //     7171358109,
    //     7374049579,
    //     6718526181,
    //     6065824362,
    //     809155682,
    //     7469285257,
    //     7254875947,
    //     7053187076,
    //     6704375681,
    //     7455731577,
    //     5962504931,
    //     6389441397,
    //     1497519402,
    //     6393376774,
    //     6811848318,
    //     7272582496,
    //     7043803998,
    //     2046554394,
    //     7398226728,
    //     1219690425,
    //     7489615136,
    //     6990533617,
    //     1525810389,
    //     1193327013,
    //     1663887182,
    //     517496177,
    //     2006828341,
    //     1361389893,
    //     611007783,
    //     6316065483,
    //     1670635331,
    //     1991453311,
    //     663955831,
    //     5437978838,
    //     7481089109,
    //     6987949137,
    //     5788276623,
    //     6584057300,
    //     966146867,
    //     5385485299,
    //     5463470875,
    //     1247091214,
    //     6444633895,
    //     7104790501,
    //     626868398,
    //     6845396592,
    //     1123014896,
    //     7058825977,
    //     1100890434,
    //     7357021763,
    //     1374646498,
    //     6127036802,
    //     1695408049,
    //     1088311024,
    //     602542056,
    //     5110266314,
    //     5621741588,
    //     6017270231,
    //     1225850517,
    //     1330619634,
    //     767950067,
    //     5384303269,
    //     912770092,
    //     6012771155,
    //     7135469634,
    //     7037856544,
    //     1065803916,
    //     7096090128,
    //     878908656,
    //     6891287640,
    //     648234361,
    //     5340354865,
    //     2058645005,
    //     451081010,
    //     5132255240,
    //     7426783479,
    //     6365843992,
    //     663764982,
    //     647436348,
    //     6997813746,
    //     858086534,
    //     7439223831,
    //     1187988441,
    //     6647696083,
    //     6187870726,
    //     427499309,
    //     5560214704,
    //     6759150160,
    //     6001996288,
    //     1535569122,
    //     202241178,
    //     1309706176,
    //     947193209,
    //     1273497682,
    //     1950651992,
    //     2085465557,
    //     208372810,
    //     6065654441,
    //     218705815,
    //     5584823622,
    //     1293765901,
    //     6702872032,
    //     464010410,
    //     921129237,
    //     1241009686,
    //     5433847988,
    //     7256491102,
    //     6804061341,
    //     527847307,
    //     424793909,
    //     2062008053,
    //     539624234,
    //     6569598957,
    //     5196535113,
    //     671867751,
    //     5657857986,
    //     1286290384,
    //     1430979538,
    //     1311881556,
    //     1061284489,
    //     1104689933,
    //     6638526291,
    //     5246055328,
    //     6365966130,
    //     2094418353,
    //     270513403,
    //     5944778265,
    //     6631477045,
    //     1437665026,
    //     5392503356,
    //     5035737250,
    //     5775011431,
    //     1332396119,
    //     7061059139,
    //     5581893523,
    //     1439212519,
    //     1060672147,
    //     6800932963,
    //     5271060852,
    //     7255190585,
    //     563554279,
    //     1228052017,
    //     477993007,
    //     1512544217,
    //     5468835693,
    //     6378629962,
    //     443704834,
    //     5464828370,
    //     1777047184,
    //     1013351340,
    //     1317725237,
    //     6294142576,
    //     6664578565,
    //     7385039688,
    //     1638138400,
    //     2124748853,
    //     6807179177,
    // ];
    //
    // if (users.includes(tg?.initDataUnsafe?.user?.id)) {
    //     return (
    //         <div className={styles.wrapper}>
    //             <div className={styles.content_block}>
    //                 Banned
    //             </div>
    //         </div>
    //     );
    // }

    return (
        <I18nextProvider i18n={i18n}>
            <ChakraProvider>
                <Routing/>
            </ChakraProvider>
        </I18nextProvider>
    )
}

export default App
